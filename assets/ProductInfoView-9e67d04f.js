import{_ as k,f as _,g as c,i as r,l as e,u as l,j as d,k as I,D as f,m as v,q as C,t as E,v as U,x as T,A as x,P as R,S as W,T as w,U as P,V as H,J as D}from"./index-aeb0aaad.js";import{h as V,W as q,b as M,S as N,i as S}from"./WebHeader-4b69b183.js";import{V as F,g as B}from"./VImageError-6b449cbe.js";import{V as A}from"./VImageLoading-af38f523.js";import{B as O}from"./Breadcrumbs-81791c7a.js";import{E as Y}from"./ErrorLayout-925dbb94.js";const j={components:{VImageLoading:A,VImageError:F},setup(){return{buyProductHotline:V}},props:{productInfo:{type:Object,required:!0}},data(){return{packingTypeIndex:0,imgWidth:0}},mounted(){document.getElementById("p-img").clientWidth&&(this.imgWidth=document.getElementById("p-img").clientWidth)},methods:{makePhoneCall(t){window.location.href="tel:"+t}},computed:{imgUrl(){return this.productInfo.imgUrl?this.productInfo.imgUrl+this.imgSize.imgSize:""},imgLazyUrl(){return this.productInfo.imgUrl?this.productInfo.imgUrl+this.imgSize.lazyImgSize:""},sImgUrl(){return this.productInfo.imgUrl?this.productInfo.imgUrl+this.sImgSize.imgSize:""},sImgLazyUrl(){return this.productInfo.imgUrl?this.productInfo.imgUrl+this.sImgSize.lazyImgSize:""},imgSize(){return B(this.imgWidth)},sImgSize(){return B(this.imgWidth/5)}}},u=t=>(U("data-v-2deb6ca5"),t=t(),T(),t),G={class:""},J={class:"row"},Q={class:"d-block d-lg-none"},X={class:"p-info__name"},$={class:"p-info__type"},K={class:"col-12 col-lg-6 p-img"},Z={class:"col-12 col-lg-6 p-info"},ee={class:"d-none d-lg-block"},te={class:"p-info__type"},oe={class:"p-info__name"},se={class:"p-desc-container"},ne={key:0,class:"p-desc"},ie=u(()=>e("p",{class:"p-desc__title"},"Dạng bào chế",-1)),ce={class:"p-desc__content"},re={key:1,class:"p-desc"},de=u(()=>e("p",{class:"p-desc__title"},"Quy cách đóng gói",-1)),ae={class:"p-desc__content"},le={key:2,class:"p-desc"},_e=u(()=>e("p",{class:"p-desc__title"},"Công dụng",-1)),he={class:"p-desc__content"},pe={key:3,class:"p-desc"},ue=u(()=>e("p",{class:"p-desc__title"},"Nhà sản xuất",-1)),me={class:"p-desc__content"},ge={class:"p-desc"},fe={key:0,class:"p-desc__title"},ye={class:"p-desc__content"},Ie={class:"p-packing"},ve=u(()=>e("p",{class:"p-packing__title"},"Đơn vị bán",-1)),be=["onClick"],we={class:"contact-container"},Ce={class:"contact-content"},ke=u(()=>e("div",{class:"contact-content__title"},"Gọi mua hàng",-1)),ze={class:"contact-content__phone"},Le=u(()=>e("div",{class:"contact-note"},"(Tư vấn miễn phí)",-1)),Se=u(()=>e("div",{class:"free-ship"},[e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"sparkles",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"decorative svg-inline--fa fa-sparkles"},[e("path",{fill:"currentColor",d:"M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM205.1 73.3c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3L123.3 187.3 9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5l114.1 52.7L176 435.8c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l52.7-114.1 114.1-52.7c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5L257.8 187.4 205.1 73.3zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z",class:""})]),e("p",null,[x("Miễn phí ship từ "),e("strong",null,"300k")])],-1));function Be(t,s,o,n,h,i){const p=_("v-image-loading"),a=_("v-image-error"),m=_("v-img"),b=_("font-awesome-icon");return c(),r("div",G,[e("div",J,[e("div",Q,[e("p",X,l(o.productInfo.name),1),e("p",$,l(o.productInfo.pharmacologicalType),1)]),e("div",K,[d(m,{id:"p-img",ref:"p-img",class:"p-img__large",src:i.imgUrl,"lazy-src":i.imgLazyUrl},{placeholder:I(()=>[d(p)]),error:I(()=>[d(a,{errorImgUrl:"/src/assets/images/product_img_default.png"})]),_:1},8,["src","lazy-src"]),d(m,{id:"p-img-2",ref:"p-img-s",class:"p-img__small",src:i.imgUrl,"lazy-src":i.sImgLazyUrl},{placeholder:I(()=>[d(p)]),error:I(()=>[d(a,{errorImgUrl:"/src/assets/images/product_img_default.png"})]),_:1},8,["src","lazy-src"])]),e("div",Z,[e("div",ee,[e("p",te,l(o.productInfo.pharmacologicalType),1),e("p",oe,l(o.productInfo.name),1)]),e("div",se,[o.productInfo.dosageForm?(c(),r("div",ne,[ie,e("p",ce,l(o.productInfo.dosageForm),1)])):f("",!0),o.productInfo.packing?(c(),r("div",re,[de,e("p",ae,l(o.productInfo.packing),1)])):f("",!0),o.productInfo.purpose?(c(),r("div",le,[_e,e("p",he,l(o.productInfo.purpose),1)])):f("",!0),o.productInfo.manufacturer?(c(),r("div",pe,[ue,e("p",me,l(o.productInfo.manufacturer),1)])):f("",!0),e("div",ge,[o.productInfo.madeIn?(c(),r("p",fe,"Xuất xứ")):f("",!0),e("p",ye,l(o.productInfo.madeIn),1)])]),e("div",Ie,[ve,(c(!0),r(v,null,C(o.productInfo.packingTypes,(y,g)=>(c(),r("div",{class:E(["p-packing__item",{"p-packing__item--selected":h.packingTypeIndex==g}]),key:g,onClick:L=>h.packingTypeIndex=g},l(y.name),11,be))),128))]),e("div",we,[e("div",{class:"contact",onClick:s[0]||(s[0]=y=>i.makePhoneCall(n.buyProductHotline.phone))},[d(b,{icon:"phone",color:"#00573e",size:"3x"}),e("div",Ce,[ke,e("div",ze,l(n.buyProductHotline.display),1)])]),Le]),Se])])])}const Ee=k(j,[["render",Be],["__scopeId","data-v-2deb6ca5"]]);const Ue={props:{desc:{type:Array,required:!0,default:()=>[]}},data(){return{selectedContent:0,sidebar:{y:0,parentHeight:0,height:0},windowWidth:1200}},mounted(){this.computeSidebar(),this.windowWidth=window.innerWidth,window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},watch:{enableScroll(t){t?window.addEventListener("scroll",this.handleScroll):window.removeEventListener("scroll",this.handleScroll)}},computed:{titles(){return this.desc.map(t=>t.name)},contents(){return this.desc.map(t=>t.content)},titleIds(){var t=[];if(!this.desc)return[];for(let s=0;s<this.desc.length;s++)t.push(`Title${s}`);return t},sidebarStyles(){let t=16,s=this.sidebar.y,o=this.sidebar.height,n=this.sidebar.parentHeight;return s<=t&&-s+t+o<=n?{position:"absolute",top:`${-this.sidebar.y+t}px`,width:"calc(100% - 1.5rem)"}:-s+t+o>=n?{position:"absolute",bottom:"0px",width:"calc(100% - 1.5rem)"}:{}},enableScroll(){return this.desc.length>0&&this.windowWidth>=1200}},methods:{scrollToContent(t){document.getElementById(`Title${t}`).scrollIntoView({behavior:"smooth",block:"start"})},handleScroll(){this.sidebar.y=document.getElementById("top-sidebar").getBoundingClientRect().y,this.sidebar.height=document.getElementById("sidebarContent").getBoundingClientRect().height,this.sidebar.parentHeight=document.getElementById("sidebarContainer").getBoundingClientRect().height;var t=this.titleIds.map(o=>document.getElementById(o).getBoundingClientRect().y),s=-1;for(const o of t)o<48&&s++;this.selectedContent=s==-1?0:s},handleResize(){this.windowWidth=window.innerWidth},computeSidebar(){this.sidebar.y=document.getElementById("top-sidebar").getBoundingClientRect().y,this.sidebar.height=document.getElementById("sidebarContent").getBoundingClientRect().height,this.sidebar.parentHeight=document.getElementById("sidebarContainer").getBoundingClientRect().height}}},z=t=>(U("data-v-2c46d43c"),t=t(),T(),t),Te={class:""},xe=z(()=>e("div",{class:"desc-title"},"Thông tin sản phẩm",-1)),Re={class:"row"},We=z(()=>e("div",{id:"top-sidebar"},null,-1)),Pe={class:"sidebar-container col-xl-3 d-none d-xl-block",ref:"sidebarContainer",id:"sidebarContainer"},He=z(()=>e("div",{class:"ps__title"},"Nội dung",-1)),De=["onClick"],Ve={class:"post col-md-12 col-xl-9",ref:"content"},qe={class:"post-content"},Me=["id"],Ne=["innerHTML"];function Fe(t,s,o,n,h,i){return c(),r("div",Te,[xe,e("div",Re,[We,e("div",Pe,[e("div",{class:"ps",ref:"sidebarContent",id:"sidebarContent",style:R(i.sidebarStyles)},[He,(c(!0),r(v,null,C(i.titles,(p,a)=>(c(),r("div",{class:E(["sidebar-item",{"sidebar-item--active":a==h.selectedContent}]),key:a,onClick:m=>i.scrollToContent(a)},l(p),11,De))),128))],4)],512),e("div",Ve,[e("div",qe,[(c(!0),r(v,null,C(i.contents,(p,a)=>(c(),r("div",{key:a,class:"h-padding"},[e("h3",{class:"post-content__title p-padding",ref_for:!0,ref:`Title${a}`,id:`Title${a}`},l(i.titles[a]),9,Me),e("div",{class:"post-content__content",innerHTML:p},null,8,Ne)]))),128))])],512)])])}const Ae=k(Ue,[["render",Fe],["__scopeId","data-v-2c46d43c"]]),Oe={components:{WebHeader:q,WebFooter:M,ProductInfo:Ee,ProductDesc:Ae,Breadcrumbs:O,ErrorLayout:Y,SquareSpinner:N},setup(){var t=W().params.id;const{productInfo:s,isLoading:o,error:n,fetchData:h}=S(t);return h(),{productInfo:s,isLoading:o,error:n,fetchData:h}},beforeRouteUpdate(t){console.log("route update");var s=t.params.id;const{productInfo:o,isLoading:n,error:h,fetchData:i}=S(s);i(),this.productInfo=o,this.isLoading=n,this.error=h,this.fetchData=i},data(){return{}},computed:{breadcrumbItems(){var t=[{title:"Trang chủ",disabled:!1,href:D.path}];if(this.productInfo.category1){const s=w(this.productInfo.category1);t.push({title:this.productInfo.category1,disabled:!1,params:{category1:s},name:P.name})}if(this.productInfo.category2&&this.productInfo.category1){const s=w(this.productInfo.category1),o=w(this.productInfo.category2);t.push({title:this.productInfo.category2,disabled:!1,params:{category1:s,category2:o},name:H.name})}return t}},methods:{onRetry(){this.fetchData()}}},Ye={class:"product-info-container container"};function je(t,s,o,n,h,i){const p=_("web-header"),a=_("breadcrumbs"),m=_("square-spinner"),b=_("error-layout"),y=_("product-info"),g=_("product-desc"),L=_("web-footer");return c(),r(v,null,[d(p),e("div",Ye,[d(a,{items:i.breadcrumbItems},null,8,["items"]),d(m,{isLoading:n.isLoading,height:"512px"},null,8,["isLoading"]),d(b,{error:n.error,onOnRetry:n.fetchData},null,8,["error","onOnRetry"]),d(y,{productInfo:n.productInfo},null,8,["productInfo"]),d(g,{desc:n.productInfo.desc},null,8,["desc"])]),d(L)],64)}const Ze=k(Oe,[["render",je]]);export{Ze as default};
