import{W as v,b as g}from"./WebHeader-4b69b183.js";import{B as S}from"./Breadcrumbs-81791c7a.js";import{a as I}from"./post-api-508f7b7a.js";import{_ as T,S as H,J as C,C as m,f as c,g as n,i as r,l as s,j as h,P as y,m as u,q as _,t as B,u as L,v as E,x as k}from"./index-aeb0aaad.js";import"./fetch-u-api-97669a32.js";const $={components:{WebHeader:v,WebFooter:g,Breadcrumbs:S},setup(){const e=H().params.id,{postInfo:t,isLoading:o,error:l,reloadData:a}=I(e);return{postInfo:t,isLoading:o,error:l,reloadData:a}},data(){return{id:this.$route.params.id,sidebar:{height:0,windowHeight:0,windowScrollTop:0,windowScrollBottom:0},content:{height:0},breadcrumbsItems:[{title:"Trang chủ",disabled:!1,href:C.path},{title:"Sức khoẻ và tin tức",disabled:!1,href:m.path},{title:"Bài viết",disabled:!0,href:m.path}],selectedContent:0}},computed:{sidebarStyles(){var e=this.sidebar.height,t=this.content.height,o=this.sidebar.windowScrollTop-88-48;return o>0&&o+e<t-48?{position:"absolute",top:`${this.sidebar.windowScrollTop-88-48}px`,width:"calc(100% - 1.5rem)"}:o+e+48>=t&&t>0?{position:"absolute",top:`${t-e}px`,width:"calc(100% - 1.5rem)"}:{}},titleIds(){var e=[];if(!this.postInfo.contents)return[];for(let t=0;t<this.postInfo.contents.length;t++)e.push(`Title${t}`);return e}},mounted(){window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleScroll),this.calculateSidebar();var e=0,t=setInterval(()=>{e++,this.calculateSidebar(),(e>15||this.content.height>100)&&clearInterval(t)},300)},unmounted(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleScroll)},methods:{calculateSidebar(){this.sidebar.windowHeight=window.innerHeight,this.content.height=this.$refs.content.offsetHeight,this.sidebar.height=this.$refs.sidebarContent.offsetHeight,window.innerWidth>1200&&this.content.height>500?window.addEventListener("scroll",this.handleScroll):window.removeEventListener("scroll",this.handleScroll)},handleResize(){this.calculateSidebar()},handleScroll(){this.sidebar.windowScrollTop=document.documentElement.scrollTop,this.sidebar.windowScrollBottom=this.sidebar.windowScrollTop+this.sidebar.windowHeight;var e=this.titleIds.map(o=>document.getElementById(o).getBoundingClientRect().y),t=-1;for(const o of e)o<48&&t++;this.selectedContent=t==-1?0:t},pushToView(e){this.$router.push({path:e})},scrollToContent(e){document.getElementById(`Title${e}`).scrollIntoView({behavior:"smooth",block:"start"})}}},x=e=>(E("data-v-e0ceeaff"),e=e(),k(),e),z={class:"container post-container"},D={class:"row"},P={class:"sidebar-container col-xl-4 d-none d-xl-block",ref:"sidebarContainer"},R=x(()=>s("div",{class:"ps__title"},"Nội dung bài viết",-1)),V=["onClick"],W={class:"post col-md-12 col-xl-8",ref:"content"},N={class:"post-content"},F=["id"],M=["innerHTML"];function Y(e,t,o,l,a,p){const f=c("web-header"),b=c("breadcrumbs"),w=c("web-footer");return n(),r(u,null,[s("div",null,[h(f),s("div",z,[h(b,{id:"brc",items:a.breadcrumbsItems},null,8,["items"]),s("div",D,[s("div",P,[s("div",{class:"ps",ref:"sidebarContent",style:y(p.sidebarStyles)},[R,(n(!0),r(u,null,_(l.postInfo.contents,(d,i)=>(n(),r("div",{class:B(["sidebar-item",{"sidebar-item--active":i==a.selectedContent}]),key:i,onClick:j=>p.scrollToContent(i)},L(d.title),11,V))),128))],4)],512),s("div",W,[s("div",N,[(n(!0),r(u,null,_(l.postInfo.contents,(d,i)=>(n(),r("div",{key:i},[s("div",{ref_for:!0,ref:`Title${i}`,id:`Title${i}`},null,8,F),s("div",{innerHTML:d.content},null,8,M)]))),128))])],512)])])]),h(w)],64)}const O=T($,[["render",Y],["__scopeId","data-v-e0ceeaff"]]);export{O as default};
